# Day1対応（初期設定）

## ルートアカウントの停止

作成した元々のアカウント　なんでもできてしまう。
料金体系や契約を変更する根本的な対応の時だけ使用する  
他にルートアカウントから機能を制限した、管理者権限のアカウントを作成できる  
管理者権限のアカウントを使用するのが普通  

### IAM

> IAM
>> ユーザーの設定を行うことができる

> セキュリティステータス
>> IAMアカウント（管理用アカウント）を作成する上でやっておくべきセキュリティ設定

#### ルートアカウントの MFA を有効化

携帯電話を使用した認証が可能となる  
１つ目の入力をしたあと、番号が変わってから２つ目を入力しなければならない。
（わかりにくい。。。）  
[MFA有効化のパスワード入力方法](https://note.mu/o_matsuo/n/nad61bf8ec52a)

#### 個々の IAM ユーザーの作成

ユーザーに直接アクセス権限を設定することもできる（既存のポリシーを直接アタッチ）

#### グループを使用したアクセス許可の割り当て

グループにポリシー（アクセス制限の種別）を付与し、
ユーザーが所属することでユーザーのアクセス権限を設定できる

グループにユーザーが所属している状態が通常のやり方

> ポリシー
>> アクセス制限の種別　グループやユーザーに付与される

> AdministratorAccess
>> AWSのサービスにフルアクセスできるポリシー

> タグ
>> 役割やユーザー情報など追加情報を設定できる ユーザーに付与される  
>> タグをキーに分類分けなどの使い分けができる  
>> 例：Role => Admin

#### IAM パスワードポリシーの適用

> パスワードポリシー
>> IAMユーザーが設定できるパスワードの種類を定義できる  
>> 大文字が必要としたり数字が必要などの設定でパスワードを強化できる

#### アカウントエイリアス

> アカウントエイリアス
>> ログインURLは初期状態では数字の羅列でわかりにくいので分かりやすい名前に変更することができる
>> 新しく設定する分かりやすい名前のことをアカウントエイリアスという

## 多要素認証を有効化する

様々な認証をできるようにする

セキュリティをあげる

## AWS Cloud Trail を有効化する

アクセスログなどを取得する仕組み

セキュリティ上必須

ログはデフォルトで設定されているが、90日で消えてしまう設定になっている。  
改めて設定することが重要

> 証跡情報
>> ログファイル取得の設定

ログを溜め込む場所はS3かlambdaがある。

> S3バケット
>> 作成したストレージ 世界で一つの固有の名称をつける必要がある
>> 無料枠の場合は使用しすぎると枠を超えてしまうので請求のアラートを設定することは重要

## AWSの請求レポートを有効化する

いくら使用したらアラートをあげることができる  
使いすぎないようにするためには必須

> CloudWatch
>> AWSの使用データを使ってモニタリングするサービス  
>> これを使用して請求情報をモニタリングさせることで、特定のタイミングでアラームを送らせたりできるようになる。

ルートアカウントのマイアカウントのページに行き、「IAM ユーザー/ロールによる請求情報へのアクセス」の項目を編集してアクティブ化させる。

> CostExplorer
>> コストの使用状況を視覚的にわかるようにしてくれるサービス

> Billing
>> この設定をすることでCloudWatch上でアラートさせることができるようになる

請求アラームの設定をする際はリージョンを「バージニア北部」に変更しなければならない
