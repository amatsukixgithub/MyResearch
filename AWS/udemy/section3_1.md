# AWSの仕組み

インフラやアプリ開発に必要なオンデマンドのパーツサービスとして提供されている  
オンプレのサーバーと比較してクラウドサーバーなため、安価で素早く構築できる。

## パーツの組み合わせでシステム構築

> EC2
>> サーバーの役割を果たす

> ELB
>> ロードバランサーの役割を果たす

> RDS
>> データベースの役割を果たす

> VPC
>> 仮想ネットワークを構築できる

> Route53
>> 外のネットワークにつなげるために、DNSサーバーの役割を果たす

> S3
>> バックアップ、ログを蓄積するためのストレージの役割を果たす

### マネージド型とアンマネージド型

多くのサービスはこの２つに分けられる

| マネージド | アンマネージド |
|-|-|
|設定が柔軟に可能 |設定が限定的 |
|管理が面倒 |管理が楽 |
| | |
|例：EC2 |例：Route53 |

## AWSの全体の把握

> リージョン
>> 全世界にインフラの配置がされており、区切られる単位をリージョンという  
>> 日本には東京と大阪にある  
>> AZ同士は通常、繋がっていないが隣接リージョン間は広帯域の専用ネットワークで接続されている
>>
>> リージョンに応じて使用できる機能や料金が異なる。  
>> バージニア北部：最新機能を使用できる  
>> 東京：最新機能を使用できない

> AZ （アヴェイラビリティゾーン）
>> リージョンのさらに細かい単位。  
>> リージョンの中にいくつか存在している。  
>> １つの物理的なデータセンターになっている。  
>>
>> 同リージョン内のAZ同士は低レイテンシーのリンクで接続されている
>>
>> 1つのAZ内のみでサービスを構成していると、データセンターが停止した際にサービス停止の恐れがある。  
>> 複数のAZにわけて信頼性の高い構成にするのが基本となる。  
>> ⬇︎  
>> 物理的な耐久性はますが、連携や共有が一部制限されてしまう。  
>> AZをまたぐことのできるサービスを把握しておくことが重要。

> エッジロケーション
>> AZのさらに細かい単位。  
>> よりエッジ側で処理するための細かい拠点

### リージョン間の連携

- AWS Direct Connect Gateway経由で接続
- インターリージョンVPC Peeringで接続
- EC2リージョン間でのAMIコピー
- S3リージョン間のレプリケーション
- RDSリージョン間でのリードレプリカ
- DynamoDBリージョン間でのレプリカライブラリ
- Route53DNSフェイルオーバー

> Peering接続
>> 同じネットワーク間に存在しているかのように相互に通信できる機能。

> レプリケーション
>> データベースを別のデータベースに複製して同期する機能。

> リードレプリカ
>> マスターのデータベースからレプリケーションされた参照専用のデータベースのこと。

> フェイルオーバ
>> システムに異常が発生した際に、予備のシステムに自動的に切り替えてくれる機能のこと。

### エッジロケーションの活用

キャッシュデータを使用する際に活用できる

- CloudFront
- AWS CDN

## AWSの操作方法

- AWSマネジメントコンソール（WEBページのこと）
- インスタンス操作（SSH接続）
- AWS CLI操作

### 基本操作

AWSマネジメントコンソールでインスタンス等を設置  
⬇︎  
SSHで接続して操作  

### CLI操作

AWSマネジメントコンソールで行う操作をコマンドでできるようにした機能

